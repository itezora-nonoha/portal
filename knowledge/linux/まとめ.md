メモしておきたいコマンドや、設定ファイルのフルパスなどをまとめる。  
（viエディタ、ファイルシステム、rpm/yumなどのパッケージ管理、XWindow、プリンタ周り）

#### 特別なシェル変数（PS1, PS2)
- PS1 … コマンドプロンプト（コマンド入力部の左側に出ている名前とかホスト名のフォーマット）
- PS2 … 2次プロンプト（バックスラッシュなどで継続行の入力をするときに左側に出るやつ）

#### manコマンドが参照するドキュメントが配置されている場所
- /usr/share/man … ディストリビューションに含まれるパッケージ
- /usr/local/share/man … ディストリビューションに含まれないソフトウェア

#### lsコマンド

|オプション|説明|
|-|-|
|-i|iノード番号を確認|

#### cpコマンド

|オプション|説明|
|-|-|
|-i|同名ファイルが存在する場合、上書きするか確認する|
|-f|同名ファイルが存在しても、強制的に上書きする|
|-p|所有者・タイムスタンプ・アクセス権などの情報を保持したままコピーする|
|-R, -r|ディレクトリ階層ごとコピーする|


#### mvコマンド

|オプション|説明|
|-|-|
|-i|同名ファイルが存在する場合、上書きするか確認する|
|-f|同名ファイルが存在しても、強制的に上書きする|

#### mkdirコマンド

|オプション|説明|
|-|-|
|-m [アクセス権] |明示的にアクセス権を指定して作成する|
|-p|中間ディレクトリを同時に作成する|

#### tarコマンド

|オプション|説明|
|-|-|
|-c|アーカイブファイルを作成する|
|-t|アーカイブファイルの内容を表示する|
|-x|アーカイブファイルを展開する|
|-f|アーカイブファイル名を指定する|
|-v|詳細情報を表示する|
|-j|アーカイブに対して、bzip2を使用する|
|-J|アーカイブに対して、xzを使用する|
|-z|アーカイブに対して、gzipを使用する|


#### cutコマンド

- 区切り文字を指定し、指定番目のテキストを取り出す（行方向はフィルタしない）
  - `cut [-d 区切り文字] [-f 取り出す番号] ファイル名


#### 設定ファイル

|ファイル|詳細|
|-|-|
|/etc/fstab|デバイスやマウントポイント、ファイルシステムについて記述（6フィールド。デバイスファイル名・マウントポイント・ファイルシステムの種類・マウントオプション・バックアップの指定・ファイルシステムのチェック）|
|/etc/ld.so.conf|ldconfigコマンドで使用する|
|/etc/ld.so.cache|ldconfigコマンドで使用する|
|/etc/yum.conf|yumコマンドの基本設定ファイル|
|/etc/yum.repos.dディレクトリ配下のファイル|リポジトリの設定ファイル|
|/etc/apt/sources.list|パッケージの置かれているネットワーク上の場所が記述されているファイル（Debian系）|
|/proc/interrupt||
|/proc/modules||
|/boot/grub/grub.conf|ブートローダGRUBの設定ファイル|
|/boot/grub/menu.list|ブートローダGRUBの設定ファイル|
|/proc/cmdline|ブート時にカーネルに渡された引数を確認する|
|/etc/inittab|システム起動に関する設定ファイル（ランレベルなどを記述）|
|/etc/passwd|ユーザ情報の一覧（7つのフィールドを持つ）|
|/etc/shadow|ユーザパスワード情報の一覧|
|/etc/group|グループ情報の一覧|
|/etc/gshadow|グループパスワード情報の一覧|
|/etc/skelディレクトリ|配下に配置したファイルが、ユーザ作成時にホームディレクトリに複製される|
|/etc/nsswitch.conf|ネームサービススイッチの設定を記述する|
|/etc/cron.dailyディレクトリ|配下のコマンドを1日ごとに実行する（anacron）|
|/etc/cron.weeklyディレクトリ|配下のコマンドを1週間ごとに実行する（anacron）|
|/etc/cron.monthlyディレクトリ|配下のコマンドを1ヶ月ごとに実行する（anacron）|
|/etc/cron.allow|cronを利用できるユーザを記述|
|/etc/cron.deny|cronを利用できなくするユーザを記述|
|/etc/localtime|システムクロックの時刻からローカルタイムへ変換するための時差情報を格納|
|/etc/ntp.conf|NTPデーモンが参照するファイル|
|/etc/syslog.conf|syslogdの設定ファイル|
|/var/log/messages|カーネルやデーモンからのメッセージなどのシステムのほとんどのメッセージを記録しているファイル|
|/etc/cups/printers.conf|プリントサービスCUPSに関する設定を記述するファイル|
|/etc/services|サービス・ポートに関する内容を記述|
|/etc/resolv.conf|DNSに関する情報を記述|
|/var/log/wtmp|最近ログインしたユーザのリスト（lastコマンドで表示）|

#### その他

|コマンド|説明|
|-|-|
|ldconfig|必要なリンクの作成及びライブラリのキャッシュを行う|
|ldd [オプション] ファイル名|共有ライブラリへの依存関係を表示する|
|logger [オプション] [メッセージ]|任意のファシリティ・プライオリティを指定し、syslogデーモンに送る|
|logrotate [オプション] [設定ファイル]|任意の設定ファイルを指定し、ログローテーションに関する設定を行う|

#### ハードウェア管理

|コマンド|説明|
|-|-|
|lspcl|システムのすべてのPCIパスと、接続されているデバイスに関する情報を表示する（デバイスのIRQ情報・バススピード・デバイスのベンダID）|
|lsusb|USBに接続したデバイスの情報を表示する|
|lsmod|現在システムにロードされているモジュールの状態を表示する|
|modprobe|カーネルへモジュールの追加や削除を行う|
|lsscsi|SATAディスクの情報やSCSIシミュレーションの情報を表示|
|lshw|SATAディスクの情報やSCSIシミュレーションの情報を表示|

#### ファイルシステム

|コマンド|説明|
|-|-|
|pvcreate|LVMの物理ボリュームを作成する|
|fdisk -l デバイスファイル名|パーティションテーブルの表示|
|fdisk デバイスファイル名|パーティションの操作を対話的に実施|
|mkfs -t|ファイルシステムの初期化を行う|
|mkswap デバイスファイル名|スワップ領域を初期化する|
|tune2fs|ext3ファイルシステムのパラメータを変更する|
|fsck|ファイルシステムの不整合をチェックし、必要であれば修正する|
|lsblk|ブロックデバイスに関する情報を表示する|



|コマンド|説明|
|-|-|
|set|シェル内のすべてのシェル変数と環境変数及び関数を表示する|



#### 略語

|略語|意味|
|-|-|
|FHS|Filesystem Hierarchy Standard|
|LVM|Logical Volume Manager|
|||
|||
|ACPI|Advanced Configuration and Power Interface|
|CUPS|Common Unix Printing System|
|PPD|Postscript Printer Description|
|MTA|Mail Transfer Agent|
|MDA|Mail Delivery Agent|
|MUA|Mail User Agent|

#### デーモン

|-|-|
|acpid|ACPIイベント（電源に関するイベント）の処理を行う|
|systemd-logind|systemdを採用したシステムでACPIイベントの処理を行う|
|xinetd|ネットワークからのリクエストの受け付ける|

#### bash環境の設定情報の読み込み順

|順番|ファイル|
|-|-|
|1|/etc/profile|
|2|~/.bash_profile|
|3|~/.bash_login|
|4|~/.profile|

#### コマンドの実行結果をシェル変数に代入する

1. コマンドを$()で囲んで、その結果をシェル変数に代入する（`var=$(cmd)`)
1. コマンドをバッククォートで囲んで、その結果をシェル変数に代入する（`var=\`exec cmd\``)

#### 環境変数

|変数名|内容|
|-|-|
|LD_LIBRARY_PATH|ライブラリが置かれたパスを指定する|




## 特殊なシェル変数

|シェル変数|説明|
|-|-|
|$$|シェルのプロセスID|
|$?|最後に実行したコマンドの終了値|
|$#|実行時引数の個数|
|$*|区切り文字（デフォルトは空白文字）で区切られたすべての引数|
|$0|実行ファイル名|
|$1, $2, …|シェルの実行時引数|




## ロギング

|コマンド|説明|
|-|-|
|logger [オプション] [メッセージ]|任意のファシリティ・プライオリティを指定し、syslogデーモンに送る|
|logrotate [オプション] [設定ファイル]|任意の設定ファイルを指定し、ログローテーションに関する設定を行う|


## logger

- 任意のファシリティとプライオリティを指定し、ログメッセージをsyslogデーモンに送る。

`logger -p user.info "Syslog Test"`

### 設定ファイル

|ファイル|詳細|
|-|-|

|/etc/syslog.conf|どのようなログを取得するかを指定する|


## ネットワーク

### ネットワークに関するコマンド

|コマンド|説明|
|-|-|
|netstat|TCP/UDPのサービスポートの状態、UNIXドメインソケットの状態、ルーティング情報などを表示|
|ping [-c 送信パケット個数] [-i 送信間隔]|ICMPプロトコルを使用し、IPアドレスレベルでの疎通確認を行う|
|traceroute|IPパケットが最終的な宛先ホストにたどり着くまでの経路をトレースして表示|
|tracepath|tracerouteの下位互換。機能が少ない|
|ifconfig|ネットワークインターフェイスに関する確認・設定を行う|
|nmcli|NetworkManagerの制御を行うコマンドラインツール|
|hostname ホスト名|ホスト名を変更する|

### netstatコマンド

|オプション|説明|
|-|-|
|(なし)|TCPポートのLISTEN以外のESTABLISHEDなどの状態と、UNIXドメインソケットの状態を表示|
|-a, --all|すべてのプロトコルを表示（ソケットの接続待ちも含む）
|-l, --listening|接続待ち（LISTEN）のソケットを表示|
|-n, --numeric|ホスト・ポート・ユーザなどの名前を解決せず、数字のアドレスで表示
|-p, --program|ソケット・ポートをオープンしているプログラムのPIDと名前を表示
|-r, --route|ルーティングテーブルを表示
|-s, --statistics|統計情報を表示
|-t, --tcp|TCPソケットを表示
|-u, --udp|UDPソケットを表示
|-x, --unix|UNIXソケットを表示

### ipコマンドとrouteコマンド

|内容|ifconfigコマンド/routeコマンド|ipコマンド|
|-|-|-|
|ネットワークインタフェーズをupにする||ip link set up dev eth0|
|ネットワークインタフェーズをdownにする||ip link set down dev eth0|
|ネットワークインターフェースのIPアドレスの追加||ip addr add 172.16.0.2/16 dev eth0|
|ネットワークインターフェースのIPアドレスの追加||ip addr del 172.16.0.2/16 dev eth0|
|ネットワークインタフェースのIPアドレスを表示||ip addr show eth0|
|ルーティングテーブルの表示|route||
|ルーティングテーブルのエントリの追加|route add -net 172.17.0.0 netmask 255.255.0.0 gw 172.16.255.254|ip route add 172.17.0.0/16 via 172.16.255.254|
|ルーティングテーブルのエントリの追加||ip route del 172.17.0.0/16 via 172.16.255.254|
|デフォルトルートのエントリの追加||ip route add default via 172.16.255.254|
|デフォルトルートのエントリを削除|route del default|
|デフォルトルートのエントリを削除|route del default ゲートウェイ [インタフェース名]|
|受信/送信パケット数および受信/送信バイト数を表示する|ifconfig eth0|ip -s link show dev eth0|

> 「netstat -nr」や「route -n」を実行した際にDestinationに0.0.0.0が表示されているエントリが「デフォルトルート」である。


## システム管理

|コマンド|説明|
|-|-|
|wall [メッセージ]|全員の端末にメッセージを送る|
|shutdown [オプション] 猶予時間 [メッセージ]|システムの停止や再起動を行う|
|runlevel|現在のランレベルを確認する|
|who -r|現在のランレベルを確認する|
|hwclock|ハードウェアクロックとシステムクロックを調整する|
|ntpdate [オプション] NTPサーバのアドレス|NTPを使用してシステム時計を設定する（-qオプションをつけると、問い合わせのみを行う）|

#### unameコマンド

- マシンアーキテクチャやカーネルバージョンなどのシステム情報を表示する

``` sh
uname [オプション]
```

|コマンド|説明|
|-|-|
|-m|マシン（ハードウェア）のタイプを表示する）
|-n|マシンのネットワークホスト名を表示する
|-r|OSのリリースを表示する
|-s|OSの名称を表示する
|-v|OSのバージョンを表示する
|-a|情報全てを表示する


### 時刻設定

|コマンド|説明|
|-|-|
|ntpdate|NTPを使用してシステムクロックを設定する
|hwclock|システムクロックとハードウェアクロックの同期を行う

#### hwclockコマンド

- ハードウェアクロックをシステムクロックに合わせる（システムクロックを基準にして調整する）

```sh
hwclock --systohc
```

|オプション|説明|
|-|-|
|-u|UTCとする|
|--systohc, -w|ハードウェアクロックをシステムクロックに合わせる|
|--hctosys, -s|システムクロックをハードウェアクロックに合わせる|



## X Window System

||ランレベル|target|
|-|-|-|
|テキストログイン画面が表示される|3|multi-user.target|
|グラフィカルログイン画面が表示される|5|graphical.target|

### デスクトップ環境による違い

||GNOME|KDE|X Window System|
|-|-|-|-|
|ディスプレイマネージャ|gdm|kdm, sddm|xdm
|ウィンドウマネージャ|metacity, mutter|kwin|twm

### XWindowに関するコマンド

|コマンド|説明|
|-|-|
|xdpyinfo|Xサーバについての情報を表示する|
|xwininfo|クリックした特定のウィンドウの情報を表示する|

## パッケージ管理

### オプション・サブコマンド一覧

|オプションの詳細|rpmコマンド|yumコマンド|dpkgコマンド|
|-|-|-|-|
|パッケージリストの表示<br>（すべて）||list|
|パッケージリストの表示<br>（インストール済みのもののみ）|-a, --all|list installed|-l, --list
|パッケージのインストール<br>（アップデートは行わない）|-i, --install||-i, --install|
|パッケージのアップデート<br>（未インストールの場合はインストール）|-U, --upgrade|
|パッケージのアップデート<br>（未インストールの場合は何もしない） |-F, --freshen|
|パッケージの削除|-e, -erase|remove, erase|-r, --remove|
|パッケージの削除<br>（設定ファイルも削除）|||-P, --purge|

### rpmコマンド

|オプション|説明|
|-|-|
|-q --query|指定したパッケージがインストールされていればバージョンを表示|
|-a --all|インストール済みのrpmパッケージ情報を一覧で表示|
|-i --info|指定したパッケージの詳細情報を表示|
|-f --file|指定したファイルを含むrpmパッケージを表示|
|-c --configfiles|指定したパッケージ内の設定ファイルのみを表示|
|-d --docfiles|指定したパッケージ内のドキュメントのみを表示|
|-l --list|指定したパッケージに含まれるすべてのファイルを表示|
|-K --checksig|パッケージの完全性を確認するために、指定されたパッケージファイルに含まれるすべてのダイジェスト値と署名をチェックする|
|-R --requires|指定したパッケージが依存しているrpmパッケージ名を表示する|
|-p --package|インストールされたrpmパッケージではなく、指定したrpmパッケージファイルの情報を表示|
|なし　--changelog|パッケージの更新情報を表示|
|-i --install|パッケージをインストールする（アップデートは行わない）|
|-U --upgrade|パッケージをアップグレードする|
|-F --freshen|パッケージをアップデートする。（インストール済みのパッケージが存在しない場合は何もしない）|
|-v --verbose|詳細な情報する|
|-h --hash|進行状況を#記号で表示する|
|なし --force|インストール済みのパッケージを上書きしてインストールする|
|--oldpackage|古いパッケージに置き換えることを許可する|
|--test|実際にはインストールせず、衝突等のチェックを行う|
|-e --erase|パッケージを削除する


## プリンタ

|コマンド|説明|
|-|-|
|lpadmin -p プリンタ名 オプション|新規にプリンタを登録する
|lpadmin -d プリンタ名|デフォルトプリンタを設定する|
|lpadmin -x プリンタ名|デフォルトプリンタを削除する|
|lpstat|プリンタキューの確認（System V系）|
|lpq|プリンタキューの確認（BSD系）|
|lpc|プリンタキューの確認（BSD系）|


## ブートローダ・カーネル



|内容|SysV init系|UEFI|
|-|-|-|
|PCファームウェア|BIOS|UEFI|
|ブートローダをメモリにロードする際の参照先|ディスクの先頭ブロック（MBR）に書き込まれたブートローダ|UEFIブートエントリで指定されたEFIシステムパーティション中のブートローダ|
|ブートローダ|GRUB|GRUB2|
|カーネルが生成する1つ目のユーザプロセス|/sbin/init|systemd|
